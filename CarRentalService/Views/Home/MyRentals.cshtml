@model List<CarRentalService.Models.Rental>

@{
    ViewData["Title"] = "My Rentals";
}

<h1>My Rentals</h1>

@if (TempData["Msg"] != null)
{
    <p style="color:green; font-weight:600; margin-bottom:20px;">
        @TempData["Msg"]
    </p>
}

@if (!Model.Any())
{
    <p>You currently have no active rentals.</p>
}
else
{
    <div style="display:flex; flex-wrap:wrap; gap:20px; margin-top:20px;">
        @foreach (var r in Model)
        {
            <div style="width:320px; border:2px solid black; padding:14px;">

                <h3 style="margin-bottom:6px;">
                    @r.Vehicle?.Brand @r.Vehicle?.Model
                </h3>

                <div style="font-size:14px; margin-bottom:4px;">
                    <b>Pickup:</b> @r.Pickup.ToString("dd.MM.yyyy HH:mm")
                </div>

                <div style="font-size:14px; margin-bottom:10px;">
                    <b>Return:</b> @r.Return.ToString("dd.MM.yyyy HH:mm")
                </div>

                <form method="post" asp-action="ReturnCar">
                    @Html.AntiForgeryToken()
                    <input type="hidden" name="rentalId" value="@r.Id" />

                    <button type="submit" class="btn">
                        Return car
                    </button>
                </form>

            </div>
        }
    </div>
}
